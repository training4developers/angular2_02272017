<!DOCTYPE html>

<html>
  <head>
    <base href="/">
    <title>Welcome to Angular 2!</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <main>Loading...</main>
    <script>
        // class Promise {

        //     constructor(fn) {
        //         this.resolveFns = [];
        //         this.rejectFns = [];
        //         function resolve(data) {
        //             this.resolveFns.forEach(fn => fn(data));
        //         }
        //         function reject(data) {
        //             this.rejectFns.forEach(fn => fn(data));
        //         }
        //         fn(resolve, reject);
        //     }

        //     then(resolveFn) {
        //         this.resolveFns.push(resolveFn);
        //         return new Promise();
        //     }

        //     catch(rejectFn) {
        //         this.rejectFns.push(rejectFn);
        //     }
        // }

        const youngMan = new Promise(function youngLady(resolve, reject) {

            setTimeout(function() {
                resolve("she is madly in love with him...");
                // reject("I fell in love with your best friend...");
            }, 4000);

        });

        youngMan.then(function() {

        }, function() {
            
        })


        youngMan.then(function(results) {
            console.log('she said yes!');
            console.log(results);

            // return new Promise((resolve, reject) => {
            //     setTimeout(function() {
            //         resolve("Fannie Mae Cafeteria");
            //     }, 4000);
            // });

            //return "Fannie Mae Cafeteria!";
            //return;

            return Promise.reject("last minute change, bride says no...");

        }).then(function(results) {
            console.log("Getting married in " + results);
        }).catch(function(results) {
            console.log('she said no!');
            console.log("signup eharmony");
            console.log(results);
        });

        console.log('young man is waiting...');








        // setTimeout(function() {
        //     console.log('a');
        //     setTimeout(function() {
        //         console.log('b');
        //         setTimeout(function() {
        //             console.log('c');
        //         }, 2000);
        //     }, 2000);
        // }, 2000);

        // var counter = 0;

        // counter++;
        // setTimeout(function() {
        //     console.log('a');
        //     counter--;
        //     if (counter === 0) {
        //         allDone();
        //     }
        // }, 1000);

        // counter++;
        // setTimeout(function() {
        //     console.log('b');
        //     counter--;
        //     if (counter === 0) {
        //         allDone();
        //     }
        // }, 5000);

        // counter++;
        // setTimeout(function() {
        //     console.log('c');
        //     counter--;
        //     if (counter === 0) {
        //         allDone();
        //     }
        // }, 1000);

        // function allDone() {
        //     console.log('all done');
        // }



        // try {
        //     var g = 2;
        //     $.ajax({}).success(function () {
        //         g 
        //         throw Error()
        //     })

        //     setTimeout(function() {
        //         throw Error("something went wrong!");
        //       console.log('did it!');
        //     },2000)
        //     console.log('waiting');
        // } catch(err) {
        //     console.log('I WAS CAUGHT!');
        // }


        // function outer() {

        //     var t = 2;

        //     setTimeout(function() {
        //         t = 4;
        //     }, 2000);

        //     return function inner() {
        //         console.log(t);
        //     };
        // }

        // var fn = outer();
        // fn();

        // setTimeout(function() {
        //     fn();
        // }, 4000);        

        //console.dir(fn);

    </script>

  </body>
</html>
